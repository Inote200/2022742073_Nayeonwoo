980217 Na Yeon Woo

testㅅㄷㄴㅅ

# State란 무엇인가

State(상태)란, 시스템에 대한 미분방정식을 푸는 과정을 단계적으로 수행하기 위해 도입된 개념이다.

시스템을 수식화할 때, state를 정의하고 이를 중심으로 시스템을 해석한다.

State는 입력(input) 또는 다른 state들에 의해 영향을 받으며,
출력(output)은 입력과 state에 의해 결정된다.

또한, state를 도입함으로써 미분방정식을 행렬방정식 형태로 표현할 수 있도록 하며,
이를 위해 state variable(상태변수) 개념이 사용된다.

요약하자면, state variable 모델은
문제를 푸는 과정 자체에 의미를 부여하기 위한 목적과,
컴퓨터를 이용한 연산을 수행하기 위한 목적으로 사용된다.

n차 미분방정식이면 state를 n개 정의한다.

2차 미분방정식 기준으로 설명하면 다음과 같다.

$$
M\frac{d^2y(t)}{dt^2} + b\frac{dy(t)}{dt} + ky(t) = r(t)
$$

상태변수를 다음과 같이 정의한다:

$$
x_1(t) = y(t), \quad x_2(t) = \frac{dy(t)}{dt}
$$

따라서 상태방정식은 다음과 같다:

$$
\begin{cases}
\frac{dx_1(t)}{dt} = x_2(t) \\
\frac{dx_2(t)}{dt} = -\frac{b}{M}x_2(t) - \frac{k}{M}x_1(t) + \frac{1}{M}r(t)
\end{cases}
$$

출력식은

$$
y(t) = x_1(t)
$$

즉, 2차 미분방정식은 state를 2개 정의함으로써 두 개의 1차 미분방정식으로 바뀐다.
사람이 판단하고 하면 이것의 효과는 미미하겠지만, 컴퓨터가 연산한다면
그냥 2차미방을 풀도록 하는 것보다 1차 미분방정식 2개로 풀도록 하는 것이 더 좋다.

state는 정하기 나름이다. 다만 이때 주의할 것은 state가 항등식이 아니어야 한다.
다시 말해 서로 다른 독립적인 state를 정의해야한다.

# 상태공간방정식 (State Space Equation)  
## ⟨1차 상태 미분방정식⟩

상태(state)를 정의하면, 미분방정식은 다음과 같이 나타낼 수 있다:

$$
\dot{x}(t) = a x(t) + b u(t)
$$

라플라스 변환을 취하면:

$$
sX(s) - x(0) = aX(s) + bU(s)
$$

이를 정리하면:

$$
(s - a)X(s) = x(0) + bU(s)
$$

따라서,

$$
X(s) = \frac{1}{s - a}x(0) + \frac{1}{s - a}bU(s)
$$

역라플라스 변환을 취하면:

$$
x(t) = e^{at}x(0) + \int_0^t e^{a(t - \tau)} b u(\tau) \, d\tau
$$

이를 보다 일반적으로 표현하면:

$$
x(t) = \Phi(t) \cdot x(0) + \int_0^t \Phi(t - \tau) b u(\tau) \, d\tau
$$

---

### 초기 상태로부터의 변화 (Transition from initial state)
$$
\Phi(t) \cdot x(0)
$$

### 입력의 영향 (Effect of input)
$$
\int_0^t \Phi(t - \tau) b u(\tau) \, d\tau
$$

---

> 상태x(t)를 정의함으로써, x(t)는 단순히 미분방정식의 해가 아니라 현재 상태가 초기 상태와 입력 신호의 영향을 통해 결정된다는 물리적 의미를 갖는 식으로 나타낼 수 있다.


# State Vector와 State Space Equation

## State Vector

$$
x(t) =
\begin{pmatrix}
x_1(t) \\
x_2(t) \\
\vdots \\
x_n(t)
\end{pmatrix}
$$

> State는 보통 여러 개가 정의되기 때문에, 이를 하나의 벡터로 표현한다.

---

## State Space Equation

**상태방정식 (State Differential Equation):**

$$
\dot{x}(t) = A x(t) + B u(t)
$$

**출력방정식 (Output Equation):**

$$
y(t) = C x(t) + D u(t)
$$

>이처럼 n차 미분 방정식을 여러 개의 1차 미분 방정식으로 바꿔서 1차 행렬 미분방정식으로 나타낸 것이 상태방정식이고 그 상태들과 입력값의 조합으로 출력값을 결정하는 방정식을 출력방정식이라고 한다.


### n-th Order System
$$
x(t) = \exp(A t)x(0) + \int_0^t \exp[A(t - \tau)] B u(\tau) \, d\tau
$$

> State가 벡터로 표현되기 때문에, 1차 상태 미분방정식은 행렬 형태로 표현된다.

---

### 라플라스 영역 표현
$$
X(s) = [sI - A]^{-1}x(0) + [sI - A]^{-1} B U(s)
$$

---

### 상태전이행렬(Transition Matrix) 정의
$$
\Phi(s) = [sI - A]^{-1}
$$

$$
\Phi(t) = \mathcal{L}^{-1}[\Phi(s)]
$$

---

### 최종 형태 (State Transition Form)
$$
x(t) = \Phi(t)x(0) + \int_0^t \Phi(t - \tau) B u(\tau) \, d\tau
$$
> **State Transition Matrix**는 시스템의 상태가 시간에 따라  
> 초기 상태로부터 어떻게 변화하는지를 나타내는 핵심적인 행렬이다.


# 예시: RLC 회로의 상태방정식 표현

$$
\begin{cases}
\dfrac{dx_1(t)}{dt} = \dfrac{1}{C}[-x_2(t) + u(t)] \\
\dfrac{dx_2(t)}{dt} = \dfrac{1}{L}[x_1(t) - R x_2(t)]
\end{cases},
\quad
y(t) = R x_2(t)
$$

이를 행렬 형태로 나타내면,

$$
\dot{x}(t) =
\begin{bmatrix}
0 & -\dfrac{1}{C} \\
\dfrac{1}{L} & -\dfrac{R}{L}
\end{bmatrix}
x(t)
+
\begin{bmatrix}
\dfrac{1}{C} \\
0
\end{bmatrix}
u(t)
$$

출력식은 다음과 같다:

$$
y(t) =
\begin{bmatrix}
0 & R
\end{bmatrix}
x(t) + 0 \cdot u(t)
$$

> **설명:**  
> RLC 회로에서 캐패시터 전압과 인덕터 전류를 상태변수로 정의했기 때문에  
> 이 시스템은 **2차 상태방정식** 형태로 표현된다.  
> 즉, 상태가 벡터로 정의되므로 전체 미분방정식은 **행렬 형태의 1차 방정식**으로 나타난다.

# 예시: 스프링–댐퍼 시스템의 상태방정식 표현

---

두 개의 질량 \( M_1 \), \( M_2 \) 로 구성된 **2자유도 스프링–댐퍼 시스템**을 상태방정식 형태로 표현한다.  
입력은 외력 \( u(t) \), 각 질량의 변위는 \( p(t) \), \( q(t) \)이다.

---

이를 미분방정식 형태로 나타내면,

$$
\begin{cases}
M_1 \ddot{p}(t) = u(t) - b_1[\dot{p}(t) - \dot{q}(t)] - k_1[p(t) - q(t)] \\
M_2 \ddot{q}(t) = b_1[\dot{p}(t) - \dot{q}(t)] + k_1[p(t) - q(t)] - b_2\dot{q}(t) - k_2 q(t)
\end{cases}
$$

---

이를 상태방정식으로 표현하기 위해 상태변수를 다음과 같이 정의한다:

<<<<<<< HEAD
$$
x_1(t) = p(t), \quad
x_2(t) = q(t), \quad
x_3(t) = \dot{p}(t), \quad
x_4(t) = \dot{q}(t)
$$

따라서,

```math
=======
\[
>>>>>>> branch01
x(t) =
\begin{pmatrix}
x_1(t)\\x_2(t)\\x_3(t)\\x_4(t)
\end{pmatrix}
=
\begin{pmatrix}
p(t)\\q(t)\\\dot{p}(t)\\\dot{q}(t)
\end{pmatrix}
<<<<<<< HEAD
```
=======
\]

>>>>>>> branch01
---

이를 행렬 형태로 나타내면,

$$
\dot{x}(t) =
\begin{bmatrix}
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1 \\
-\dfrac{k_1}{M_1} & \dfrac{k_1}{M_1} & -\dfrac{b_1}{M_1} & \dfrac{b_1}{M_1} \\
\dfrac{k_1}{M_2} & -\dfrac{k_1 + k_2}{M_2} & \dfrac{b_1}{M_2} & -\dfrac{b_1 + b_2}{M_2}
\end{bmatrix}
x(t)
+
\begin{bmatrix}
0 \\
0 \\
\dfrac{1}{M_1} \\
0
\end{bmatrix}
u(t)
$$

---

출력식은 다음과 같다:

$$
y(t) =
\begin{bmatrix}
1 & 0 & 0 & 0
\end{bmatrix}
x(t)
$$

---

> **설명:**  
> 스프링–댐퍼 시스템의 각 질량의 변위와 속도를 상태변수로 정의했기 때문에  
> 이 시스템은 2자유도를 가지며, **4차 상태방정식** 형태로 표현된다.  
> 즉, 상태가 벡터로 정의되므로 전체 미분방정식은 **행렬 형태의 1차 방정식**으로 나타난다.



```python

```
